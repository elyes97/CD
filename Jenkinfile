pipeline {
  environment {
    registry = "elyes97/cd"
    registryCredential = 'dockerhub12'
    dockerImage = ''
  }
  agent any
  stages 
  {
  stage('clean') 
  {
    steps {
     sh label: '', script: 'mvn clean' #clean maven project
		  }
  }
  stage('package') 
  {
	steps {
         sh label: '', script: 'mvn package'     #package maven project
		  }
  }
  stage('create docker image') 
  {
	steps {
          sh label: '', script: 'mvn clean install'   #create docker image with maven plugin and deploy image on dockerhub
	      }
 }
    

    
  }
}

