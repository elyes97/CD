pipeline {
  environment {
    registry = "elyes97/cd"
    registryCredential = 'dockerhub12'
    dockerImage = ''
  }
  agent any
  stages 
  {
  stage('clean') 
  {
    steps {
    def MvnHome = tool name: 'Maven', type: 'maven'
     sh label: '', script: '${MvnHome}/bin/mvn clean' 
		  }
  }
  stage('package') 
  {
	steps {
	def MvnHome = tool name: 'Maven', type: 'maven'
         sh label: '', script: '${MvnHome}/bin/mvn package'     
		  }
  }
  stage('create docker image') 
  {
	steps {
	def MvnHome = tool name: 'Maven', type: 'maven'
          sh label: '', script: '${MvnHome}/bin/mvn clean install'   
	      }
 }
    

    
  }
}

